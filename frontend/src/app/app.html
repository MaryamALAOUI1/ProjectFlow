<p-toast></p-toast>

<div class="app-container">
  <header class="app-header">
    <div class="logo">
      <i class="pi pi-th-large"></i>
      <h1>ProjectFlow</h1>
    </div>
    <div class="search-bar">
      <p-iconField iconPosition="left">
        <p-inputIcon class="pi pi-search"></p-inputIcon>
        <input 
          pInputText 
          [(ngModel)]="searchText"
          (ngModelChange)="onSearchChange()" 
          placeholder="Search projects..." 
        />
      </p-iconField>
    </div>
    <p-button label="Add Project" icon="pi pi-plus" (click)="showAddProjectDialog()"></p-button>
  </header>
  
  <main>
    <app-project-list
      [projects]="filteredProjects"
      [isLoading]="isLoading"
      (addProjectClick)="showAddProjectDialog()">
    </app-project-list> 
  </main>
</div>

<p-dialog header="Create New Project" [(visible)]="displayAddProjectDialog" [modal]="true" [style]="{width: '30rem'}">
  <div class="field">
      <label for="projectName">Project Name</label>
      <input id="projectName" pInputText [(ngModel)]="newProjectName" (keyup.enter)="onAddProjectSubmit()" />
      <small *ngIf="projectErrorMessage" class="p-error">{{ projectErrorMessage }}</small>
  </div>
  <ng-template pTemplate="footer">
      <p-button label="Cancel" styleClass="p-button-text" (click)="displayAddProjectDialog=false"></p-button>
      <p-button label="Create" (click)="onAddProjectSubmit()" [loading]="isSubmittingProject" [disabled]="!newProjectName"></p-button>
  </ng-template>
</p-dialog>