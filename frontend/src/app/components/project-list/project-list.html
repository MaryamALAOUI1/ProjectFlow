<p-toast></p-toast>
<p-confirmDialog></p-confirmDialog>

<div *ngIf="isLoading" class="spinner-container">
  <p-progressSpinner></p-progressSpinner>
</div>

<div *ngIf="!isLoading" class="project-grid">
  <app-project-card 
    *ngFor="let project of filteredProjects" 
    [project]="project"
    (click)="navigateToProject(project)">
  </app-project-card>
  
  <div class="new-project-card" (click)="showAddProjectDialog()">
    <i class="pi pi-plus"></i>
    <span>Add New Project</span>
  </div>
</div>

<p-dialog 
  header="Create New Project" 
  [(visible)]="displayAddProjectDialog"
  (onHide)="onDialogHide()"
  [modal]="true" 
  [style]="{width: '30rem'}"
  [draggable]="false">
    
    <div class="field mt-3">
        <label for="projectName" class="font-semibold w-full">Project Name</label>
        <input 
            id="projectName" 
            pInputText 
            class="w-full mt-2"
            placeholder="e.g., Q3 Marketing Campaign"
            [(ngModel)]="newProjectName" />
    </div>

    <div class="field mt-3">
      <label for="projectDueDate" class="font-semibold w-full">Due Date</label>
      <p-datePicker
        [(ngModel)]="newProjectDueDate"
        styleClass="w-full mt-2"
        [showIcon]="true"
        inputId="projectDueDate"
        [appendTo]="'body'"> 
      </p-datePicker>
    </div>

    <ng-template pTemplate="footer">
        <p-button 
            label="Cancel" 
            styleClass="p-button-text p-button-secondary" 
            (click)="onDialogHide()">
        </p-button>
        <p-button 
            label="Create Project" 
            (click)="onAddProjectSubmit()" 
            [loading]="isSubmittingProject" 
            [disabled]="!newProjectName.trim()">
        </p-button>
    </ng-template>
</p-dialog>